# é¸£æ½®æ•°æ®å¤„ç†æµç¨‹è¯´æ˜

## ğŸ¯ æ ¸å¿ƒæ€è·¯

æˆ‘ä»¬é‡‡ç”¨**åŒé‡å¤„ç†**ç­–ç•¥æ¥ç¡®ä¿æ•°æ®è´¨é‡ï¼š
1. **ç¬¬ä¸€é˜¶æ®µæå–**ï¼šä»æ¸¸æˆé…ç½®æ–‡ä»¶ä¸­æå–åŸå§‹æ•°æ®
2. **ç¬¬äºŒé˜¶æ®µç²¾ç‚¼**ï¼šå¯¹æå–çš„æ•°æ®è¿›è¡Œæ·±åº¦å¤„ç†å’Œå…ƒæ•°æ®è¡¥å…¨

## ğŸ“¦ æœ€ç»ˆè¾“å‡ºç»“æ„

```
final_output/
â”œâ”€â”€ 6ä¸ªæ ¸å¿ƒæ•°æ®æ–‡ä»¶ï¼ˆé»„é‡‘å¤§ä¾¿ï¼‰
â”‚   â”œâ”€â”€ dialogs_zh-Hans_complete.jsonl  â­ æœ€é‡è¦
â”‚   â”œâ”€â”€ characters.jsonl
â”‚   â”œâ”€â”€ items.jsonl
â”‚   â”œâ”€â”€ weapons.jsonl
â”‚   â”œâ”€â”€ enemies.jsonl
â”‚   â””â”€â”€ achievements.jsonl
â”‚
â”œâ”€â”€ scripts/ å¤„ç†è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ç¬¬ä¸€é˜¶æ®µæå–è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ extract_dialog.py      â†’ WutheringDialog/data/dialogs_zh-Hans.jsonl
â”‚   â”‚   â”œâ”€â”€ extract_characters.py  â†’ characters.jsonl
â”‚   â”‚   â”œâ”€â”€ extract_items.py       â†’ items.jsonl
â”‚   â”‚   â”œâ”€â”€ extract_weapons.py     â†’ weapons.jsonl
â”‚   â”‚   â”œâ”€â”€ extract_enemies.py     â†’ enemies.jsonl
â”‚   â”‚   â””â”€â”€ extract_achievements.py â†’ achievements.jsonl
â”‚   â”‚
â”‚   â””â”€â”€ ç¬¬äºŒé˜¶æ®µç²¾ç‚¼è„šæœ¬
â”‚       â”œâ”€â”€ generate_split_data.py         â†’ ç”Ÿæˆsplitæ ¼å¼
â”‚       â”œâ”€â”€ complete_dialogue_processor.py â†’ æœ€ç»ˆå¤„ç† â­
â”‚       â”œâ”€â”€ auto_scan_categories.py       â†’ æ‰«ææ–°æ¨¡å¼
â”‚       â””â”€â”€ analyze_final_quality.py       â†’ è´¨é‡åˆ†æ
â”‚
â””â”€â”€ ConfigDB/ å’Œ TextMap/ï¼ˆæ¸¸æˆåŸå§‹é…ç½®æ–‡ä»¶ï¼‰
```

## ğŸ”„ å®Œæ•´å¤„ç†æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šä»æ¸¸æˆæ–‡ä»¶ç”ŸæˆåŸå§‹æ•°æ®ï¼ˆç¬¬ä¸€é˜¶æ®µæå–ï¼‰

```bash
# è¿™äº›è„šæœ¬ä»æ¸¸æˆåŸå§‹æ–‡ä»¶ä¸­æå–æ•°æ®
python extract_dialog.py              # ç”ŸæˆåŸå§‹çš„å¯¹è¯æ•°æ®
python extract_characters.py
python extract_items.py
python extract_weapons.py
python extract_enemies.py
python extract_achievements.py
```

**è¾“å‡º**: åŸå§‹æ•°æ®æ–‡ä»¶ï¼ˆä»…åŒ…å«åŸºç¡€å­—æ®µï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†ï¼‰

### ç¬¬äºŒæ­¥ï¼šå¯¹åŸå§‹æ•°æ®è¿›è¡Œç²¾ç‚¼ï¼ˆç¬¬äºŒé˜¶æ®µç²¾ç‚¼ï¼‰

```bash
# 1. ç”Ÿæˆsplitæ ¼å¼ï¼ˆæ ¼å¼åŒ–ï¼‰
python generate_split_data.py

# 2. å®Œæ•´å¤„ç†å¯¹è¯æ•°æ®ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰â­
python complete_dialogue_processor.py

# 3. éªŒè¯è´¨é‡
python analyze_final_quality.py
```

**è¾“å‡º**: é«˜è´¨é‡ã€å®Œæ•´çš„æ•°æ®é›†

## ğŸ“Š ä¸¤ä¸ªé˜¶æ®µçš„å¯¹æ¯”

| é˜¶æ®µ | æ–‡ä»¶å | æ•°æ®è´¨é‡ | ç”¨é€” |
|------|--------|----------|------|
| ç¬¬ä¸€é˜¶æ®µæå– | `dialogs_zh-Hans.jsonl` | åŸå§‹æå–æ•°æ® | ä»…åŒ…å«doc_idå’Œtextï¼Œç»“æ„ç®€å• |
| ç¬¬äºŒé˜¶æ®µç²¾ç‚¼ | `dialogs_zh-Hans_complete.jsonl` | å®Œæ•´å¤„ç†æ•°æ® | åŒ…å«å®Œæ•´å…ƒæ•°æ®ï¼ˆquest_id, quest_name, chapterç­‰ï¼‰ |

## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªé˜¶æ®µï¼Ÿ

### ç¬¬ä¸€é˜¶æ®µï¼ˆåŸå§‹æå–ï¼‰
- **ç›®çš„**: ä»æ¸¸æˆé…ç½®æ–‡ä»¶ä¸­æå–åŸºç¡€æ•°æ®
- **ç‰¹ç‚¹**: 
  - åªåŒ…å«doc_idå’Œtextå­—æ®µ
  - ç¼ºå°‘quest_idã€quest_nameç­‰å…ƒæ•°æ®
  - æ•°æ®ç»“æ„ç®€å•ï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†

### ç¬¬äºŒé˜¶æ®µï¼ˆæ·±åº¦å¤„ç†ï¼‰
- **ç›®çš„**: å°†åŸºç¡€æ•°æ®è½¬æ¢ä¸ºé«˜è´¨é‡ã€å¯ç”¨çš„æ•°æ®é›†
- **å®Œæˆçš„å·¥ä½œ**:
  - âœ… å»ºç«‹å®Œæ•´çš„quest_idæ˜ å°„å…³ç³»
  - âœ… è¡¥å…¨quest_nameã€quest_descç­‰å…ƒæ•°æ®
  - âœ… æ™ºèƒ½åˆ†ç±»å¯¹è¯ç±»å‹
  - âœ… è¾“å‡ºé€‚åˆRAGä½¿ç”¨çš„æ ¼å¼

## ğŸ“ å…·ä½“æ­¥éª¤è¯´æ˜

### å½“ä½ è·å¾—æ–°çš„æ¸¸æˆæ–‡ä»¶æ—¶ï¼š

1. **ç¬¬ä¸€é˜¶æ®µæå–**
   ```bash
   python extract_dialog.py
   # å…¶ä»–extract_*.pyè„šæœ¬
   ```
   ç”ŸæˆåŸå§‹æ•°æ®æ–‡ä»¶

2. **ç¬¬äºŒé˜¶æ®µç²¾ç‚¼**
   ```bash
   python generate_split_data.py
   python complete_dialogue_processor.py
   ```
   ç”Ÿæˆå®Œæ•´æ•°æ®é›†

3. **éªŒè¯è´¨é‡**
   ```bash
   python analyze_final_quality.py
   ```
   æ£€æŸ¥æ˜ å°„ç‡ã€è¦†ç›–ç‡ç­‰æŒ‡æ ‡

## ğŸ’¡ æ•°æ®æµè½¬è¿‡ç¨‹

**åŸå§‹æå–æ•°æ®** = ä»æ¸¸æˆé…ç½®æ–‡ä»¶æå–çš„æ•°æ®
- æ ¼å¼ï¼š`{"doc_id": "...", "text": "..."}`
- ç‰¹ç‚¹ï¼šåŸºç¡€å­—æ®µå®Œæ•´ï¼Œä½†ç¼ºå°‘å…ƒæ•°æ®ä¿¡æ¯

**å®Œæ•´å¤„ç†æ•°æ®** = ç»è¿‡æ·±åº¦å¤„ç†åçš„æ•°æ®é›†
- æ ¼å¼ï¼šå®Œæ•´çš„ç»“æ„åŒ–æ•°æ®
- åŒ…å«ï¼šquest_idã€quest_nameã€chapter_titleã€section_descç­‰æ‰€æœ‰å…ƒæ•°æ®

## ğŸš€ å¿«é€Ÿå¯åŠ¨

å¦‚æœä½ å·²ç»æœ‰äº†ç¬¬ä¸€é˜¶æ®µçš„æå–ç»“æœï¼š

```bash
# ç›´æ¥è¿›å…¥ç¬¬äºŒé˜¶æ®µç²¾ç‚¼
cd final_output
python scripts/generate_split_data.py
python scripts/complete_dialogue_processor.py
python scripts/analyze_final_quality.py
```

å¦‚æœè¦ä»é›¶å¼€å§‹ï¼š

```bash
# å®Œæ•´æµç¨‹
cd wutheringdata
python extract_dialog.py        # ç¬¬ä¸€é˜¶æ®µï¼šæå–åŸå§‹æ•°æ®
cd final_output
python scripts/generate_split_data.py    # ç¬¬äºŒé˜¶æ®µï¼šç”Ÿæˆå®Œæ•´æ•°æ®é›†
python scripts/complete_dialogue_processor.py
python scripts/analyze_final_quality.py
```

---

**æ€»ç»“**: ç¬¬ä¸€é˜¶æ®µæ˜¯"æå–"ï¼Œç¬¬äºŒé˜¶æ®µæ˜¯"ç²¾ç‚¼"ï¼ç¡®ä¿æ•°æ®è´¨é‡è¾¾åˆ°RAGä½¿ç”¨æ ‡å‡†ã€‚

# 鸣潮数据增量更新指南

## 📋 概述

本指南说明如何在鸣潮游戏更新后快速更新所有数据文件。预计处理时间：5-10分钟。

**数据来源**: [Dimbreath/WutheringData](https://github.com/Dimbreath/WutheringData)

## 📦 项目结构

```
.
├── output/                    # 最终输出文件（处理后生成）
├── ConfigDB/                  # 游戏配置文件（需从WutheringData获取）
├── TextMap/                   # 文本映射文件（需从WutheringData获取）
└── scripts/                   # 处理脚本
```

## 📋 使用前提

**重要**: ConfigDB 和 TextMap 目录需要通过以下方式获取：
- 从 [WutheringData](https://github.com/Dimbreath/WutheringData) 克隆或下载
- 这些目录不包含在本项目中（因为体积过大）

## 🔄 完整更新流程

### 1. 获取新版本数据

从 [WutheringData](https://github.com/Dimbreath/WutheringData) 克隆最新版本：

```bash
git clone https://github.com/Dimbreath/WutheringData.git
# 或者更新现有仓库
cd WutheringData
git pull
```

### 2. 复制配置文件

```bash
# 复制ConfigDB和TextMap目录到当前项目
cp -r WutheringData/ConfigDB ./
cp -r WutheringData/TextMap ./
```

### 3. 运行处理脚本

```bash
# 进入scripts目录
cd scripts/

# 生成split格式
python generate_split_data.py

# 完整处理对话数据 ⭐
python complete_dialogue_processor.py

# 验证质量
python analyze_final_quality.py
```

### 4. 更新其他数据（可选）

```bash
# 仍在scripts目录下
python extract_characters.py
python extract_items.py
python extract_weapons.py
python extract_enemies.py
python extract_achievements.py
```

## 📊 质量指标

处理完成后检查以下指标：

- ✅ 映射率 ≥ 80%
- ✅ Quest Name覆盖率 ≥ 90%
- ✅ Unknown率 ≤ 5%

## ⚠️ 常见问题

### 映射率过低

如果映射率低于80%：

```bash
# 扫描新的数据模式
python auto_scan_categories.py

# 根据输出更新 complete_dialogue_processor.py 中的分类字典

# 重新处理
python complete_dialogue_processor.py
```

### 文件路径问题

确保在正确的目录运行脚本：

```bash
# 在scripts目录下
cd scripts
python complete_dialogue_processor.py
```

## 🎯 快速更新（仅对话数据）

如果只需要更新对话数据：

```bash
# 1. 替换ConfigDB和TextMap
# 2. 运行处理
python scripts/complete_dialogue_processor.py

# 3. 验证
python scripts/analyze_final_quality.py
```

## 📝 更新检查清单

- [ ] 获取最新版 WutheringData
- [ ] 复制 ConfigDB/ 目录
- [ ] 复制 TextMap/ 目录
- [ ] 运行 complete_dialogue_processor.py
- [ ] 验证质量指标
- [ ] 检查output/目录中的输出文件

## 🎉 完成标志

更新成功的标志：

1. ✅ output/ 目录中包含6个JSONL文件
2. ✅ 映射率 ≥ 80%
3. ✅ Quest Name覆盖率 ≥ 90%
4. ✅ 数据量有合理变化

---

**参考资源**:
- 原始数据: https://github.com/Dimbreath/WutheringData
- 游戏: Wuthering Waves (鸣潮) by Kuro Games
